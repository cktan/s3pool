MKFILE_PATH := $(abspath $(lastword $(MAKEFILE_LIST)))
MKFILE_DIR := $(dir $(MKFILE_PATH))
GOPATH := $(abspath $(MKFILE_PATH)/../../..)
REV := $(shell git rev-parse --short HEAD)

all:
	echo '// THIS FILE IS GENERATED BY Makefile. DO NOT MODIFY. ' > conf/rev.go
	echo "package conf" >> conf/rev.go
	echo "var Revision = \"$(REV)\"" >> conf/rev.go
	GOPATH=$(GOPATH) go get .
	GOPATH=$(GOPATH) go build .


clean:
	GOPATH=$(GOPATH) go clean .


.PHONY: all install clean
